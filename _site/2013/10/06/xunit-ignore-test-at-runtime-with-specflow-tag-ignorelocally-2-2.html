<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XUnit Ignore test at runtime (with SpecFlow tag @IgnoreLocally) | Chris McKelt</title>

    <link href="/assets/css/rouge-github.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">

    <link rel="alternate" type="application/atom+xml" title="Chris McKelt’s blog" href="/feed.xml">

    <link rel="canonical" href="http://0.0.0.0:4000/2013/10/06/xunit-ignore-test-at-runtime-with-specflow-tag-ignorelocally-2-2.html" />
  </head>
  <body>
    <header>
  <span class="font-semibold text-xl tracking-tight">
    mckelt.com
  </span>
  <div class="follow-btns">
    <a class="btn btn-twitter-round" href="https://twitter.com/chris_mckelt" target="_blank" rel="noopener noreferrer" alt="Twitter" title="Me on Twitter"><span class="sr-only">Twitter</span></a>
    <a class="btn btn-github-round" href="https://github.com/chrismckelt/" target="_blank" rel="noopener noreferrer" alt="GitHub" title="Me on GitHub"><span class="sr-only">GitHub</span></a>
    <a class="btn btn-rss-round" href="/feed.xml" target="_blank" alt="RSS" title="RSS"><span class="sr-only">RSS</span></a>
  </div>
</header>

    <nav>
      <ul>
        <li><a href="/">Posts</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/talks">Talks</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </nav>

    <main>
      <article>
        <h2>XUnit Ignore test at runtime (with SpecFlow tag @IgnoreLocally)</h2>
        <p class="publish-date">
  Published: <time datetime="2013-10-06">Oct 6, 2013</time>
  
  <br />
  
  By: <a rel="author"
    href="https://www.linkedin.com/in/"
    title="">
       
  </a>
</p>

        <p>XUnit Ignore test at runtime (with SpecFlow tag @IgnoreLocally)</p>

<p>Code –&gt; <a href="https://github.com/chrismckelt/XUnit.OptionallyIgnore">https://github.com/chrismckelt/XUnit.OptionallyIgnore</a></p>

<p>NuGet –&gt; <a href="https://www.nuget.org/packages/Xunit.SpecFlow.AssertSkip/">https://www.nuget.org/packages/Xunit.SpecFlow.AssertSkip/</a></p>

<p>As Xunit has no Assert.Ignore() using the OptionallyIgnoreTestFactAttribute attribute on a method and setting McKeltCustom.SpecflowPlugin.Settings.IgnoreLocally == true will ignore the test at runtime</p>

<p>In SpecFlow set this as a plugin and use the tag @IgnoreLocally – before each test scenario is run turn on/off the setting to run this test.</p>

<p> </p>

<p> </p>

<p> </p>

<p>Sample usage:</p>

<p> </p>

<p>namespace Tester</p>

<p>{</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class Dummy

{

    public Dummy()

    {

        McKeltCustom.SpecflowPlugin.Settings.IgnoreLocally = true;

    }

}

public class TestFixture : IUseFixture&lt;Dummy&gt;

{

    \[OptionallyIgnoreTestFact\]

    public void DoesThisWork()

    {

        Assert.True(false, "This should not be run");

    }

    public void SetFixture(Dummy data)

    {

        throw new NotImplementedException();

    }

}
</code></pre></div></div>

<p>}</p>

<p>.csharpcode, .csharpcode pre<br />{<br /> font-size: small;<br /> color: black;<br /> font-family: consolas, “Courier New”, courier, monospace;<br /> background-color: #ffffff;<br /> /*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt<br />{<br /> background-color: #f4f4f4;<br /> width: 100%;<br /> margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }</p>

<p> </p>

<p>SpecFlow tag can be on a feature or a scenario</p>

<p><a href="files/image_42.png"><img src="images/image_thumb_42.png" alt="image" title="image" /></a></p>

<p>Add the following to the .config file</p>

<p> </p>

<p>&lt;specFlow&gt;
    <!--<unitTestProvider name="xUnit" />-->
    &lt;generator allowDebugGeneratedFiles=“false” allowRowTests=“true” generateAsyncTests=“false” path=”.\lib”/&gt;
    &lt;runtime stopAtFirstError=“false” missingOrPendingStepsOutcome=“Ignore”&gt;
      &lt;!–<dependencies></dependencies></p>
<register name="CustomGeneratorPlugin" type="PhoenixCustom.Generator.SpecflowPlugin.CustomGeneratorPlugin, PhoenixCustom.Generator.SpecflowPlugin" as="PhoenixCustom.Generator.SpecflowPlugin.CustomGeneratorPlugin, PhoenixCustom.Generator.SpecflowPlugin" />

<register name="CustomGeneratorProvider" type="PhoenixCustom.Generator.SpecflowPlugin.CustomGeneratorProvider, PhoenixCustom.Generator.SpecflowPlugin" as="PhoenixCustom.Generator.SpecflowPlugin.CustomGeneratorProvider, PhoenixCustom.Generator.SpecflowPlugin" />

<p>&lt;/dependencies&gt;–&gt;
    &lt;/runtime&gt;
    &lt;trace traceSuccessfulSteps=“true” traceTimings=“false” minTracedDuration=“0:0:0.1” stepDefinitionSkeletonStyle=“RegexAttribute”/&gt;
    &lt;plugins&gt;
      &lt;add name=“McKeltCustom” path=”.\lib” type=“GeneratorAndRuntime”/&gt;
    &lt;/plugins&gt;
    <!-- For additional details on SpecFlow configuration options see http://go.specflow.org/doc-config -->
    &lt;stepAssemblies&gt;
      <!-- This attribute is required in order to use StepArgument Transformation as described here; 
 https://github.com/marcushammarberg/SpecFlow.Assist.Dynamic/wiki/Step-argument-transformations  -->
      <!-- This attribute is required in order to use StepArgument Transformation as described here; 
 https://github.com/marcusoftnet/SpecFlow.Assist.Dynamic/wiki/Step-argument-transformations  -->
      &lt;stepAssembly assembly=“SpecFlow.Assist.Dynamic”/&gt;
    &lt;/stepAssemblies&gt;
  &lt;/specFlow&gt;</p>

<p>.csharpcode, .csharpcode pre<br />{<br /> font-size: small;<br /> color: black;<br /> font-family: consolas, “Courier New”, courier, monospace;<br /> background-color: #ffffff;<br /> /*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt<br />{<br /> background-color: #f4f4f4;<br /> width: 100%;<br /> margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }</p>

<p> </p>

<p>Finally put the all compiled assemblies into a <strong><em>lib</em></strong> folder in the root folder of your SpecFlow project</p>

<p> </p>

<p><a href="files/image_43.png"><img src="images/image_thumb_43.png" alt="image" title="image" /></a></p>

<p> </p>

<p>Tests marked with @IgnoreLocally  or OptionallyIgnoreTest will now skip the test if McKeltCustom.SpecflowPlugin.Settings.IgnoreLocally = true</p>

<p> </p>

<p><a href="files/image_44.png"><img src="images/image_thumb_44.png" alt="image" title="image" /></a></p>

        <p>
  <a href="https://twitter.com/intent/tweet?text=XUnit Ignore test at runtime (with SpecFlow tag @IgnoreLocally)&amp;url=http://0.0.0.0:4000/2013/10/06/xunit-ignore-test-at-runtime-with-specflow-tag-ignorelocally-2-2.html&amp;via=dzhavatushev" class="btn btn-twitter">
    <span class="label">Share on Twitter</span>
  </a>
</p>

      </article>
    </main>

    <script src="/assets/js/main.js"></script>
  </body>
</html>
