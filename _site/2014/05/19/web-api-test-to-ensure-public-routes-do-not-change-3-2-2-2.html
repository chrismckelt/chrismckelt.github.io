<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web API Test to ensure public routes do not change | Chris McKelt</title>

    <link href="/assets/css/rouge-github.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">

    <link rel="alternate" type="application/atom+xml" title="Chris McKelt’s blog" href="/feed.xml">

    <link rel="canonical" href="http://0.0.0.0:4000/2014/05/19/web-api-test-to-ensure-public-routes-do-not-change-3-2-2-2.html" />
  </head>
  <body>
    <header>
  <h1>Chris McKelt <span> Posts</span></h1>
  
  <div class="follow-btns">
    <a class="btn btn-twitter" href="https://twitter.com/chris_mckelt" target="_blank" rel="noopener noreferrer">
      Twitter
    </a><a class="btn btn-github" href="https://github.com/chrismckelt" target="_blank" rel="noopener noreferrer">
      GitHub
    </a><a class="btn btn-rss" href="/feed.xml" target="_blank">
      RSS
    </a>
  </div>
</header>


    <nav>
      <ul>
        <li><a href="/">Posts</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/talks">Talks</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </nav>

    <main>
      <article>
        <h2>Web API Test to ensure public routes do not change</h2>
        <p class="publish-date">
  Published: <time datetime="2014-05-19">May 19, 2014</time>
  
</p>

        <p>[TestFixture] public class RouteTestFixture { [Test] public void Routes_should_not_change() { const string good = @ “all existing routes go here (hint run the test first then copy output to here)”; var goodRoutes = good.Split(Convert.ToChar(“;”)); var notFound = new List &lt; string &gt; (); var ass = Assembly.GetAssembly(typeof(EventStatisticsController)); var sb = new StringBuilder(); foreach(var type in ass.GetTypes()) { try { var members = type.GetMembers(); for (int i = 0; i &lt; members.Length; i++) { if (members[i].IsDefined(typeof(RouteAttribute), false)) { Object[] atts = members[i].GetCustomAttributes(typeof(RouteAttribute), false); for (int j = 0; j &lt; atts.Length; j++) { var routeAttribute = (RouteAttribute) atts[j]; string route = routeAttribute.Template + @ “/” + routeAttribute.Name; Console.WriteLine(route); sb.Append(route + “;”); if (!goodRoutes.Contains(route)) { notFound.Add(route); } } } } } catch (Exception e) { Console.WriteLine(@ “An exception occurred: {0}”, e.Message); } } if (notFound.Any()) { Console.WriteLine(@ “– MISSING ROUTES –”); foreach(var nf in notFound) { Console.WriteLine(nf); } Assert.Fail(“Missing Routes: “ + notFound.Count); } else { Assert.True(true, “All routes matched”); } Console.WriteLine(@ “————————————————”); Console.WriteLine(@ “Match the following string for future tests”); Console.WriteLine(sb.ToString()); } }</p>

        <p>
  <a href="https://twitter.com/intent/tweet?text=Web API Test to ensure public routes do not change&amp;url=http://0.0.0.0:4000/2014/05/19/web-api-test-to-ensure-public-routes-do-not-change-3-2-2-2.html&amp;via=dzhavatushev" class="btn btn-twitter">
    <span class="label">Share on Twitter</span>
  </a>
</p>

      </article>
    </main>

    <script src="/assets/js/main.js"></script>
  </body>
</html>
